# SpringBasic

## 좋은 객체 지향 설계의 5가지 원칙

### SRP 단일 책임 원칙 (Single Responsibility Principle)
 * 한 클래스는 하나의 책임만 가져야 한다.

### DIP 의존관계 역전 원칙 (Dependency Inversion Principle)
 * 프로그래머는 "추상화에 의존해야지, 구체화에 의존하면 안된다." 의존성 주입은 이원칙을 따르는 방법중 하나다.

### OCP (Open Closed Principle)
 * 소프트웨어 요소는 확장에는 열려 있으나 변경에는 닫혀 있어야 한다.

### ISP 인터페이스 분리 원칙 (Interface Segregation Principle)

### LSP 리스코프 치환 원칙 (Liskov Substitution Principle)

## 의존관계 주입 DI(Dependency Injection)

 * 의존관계는 '정적인 클래스 의존관계와, 실행시점에 결정되는 동적인 객체(인스턴스) 의존 관계를 분리해서 생각하자
   * 정적인 클래스 의존관계 - 클래스가 사용하는 import코드만 보고 의존 관계 쉽게 판단 가능
   * 동적인 클래스 의존관계 - 어플리케이션 실행 시점에 실제 생성된 객체 인스턴스의 참조가 연결된 의존 관계

    
## IoC컨테이너, DI 컨테이너
* Appconfig 처럼 객체를 생성하고 관리하면서 의존관계를 연결 해주는 것
* 어샘블러, 오브젝트 팩토리등으로 불리기도함


## 스프링 컨테이너
 * ApplicationContext를 스프링 컨테이너라고 한다
 * 기존에는 개발자가 'AppConfig'를 사용해서 직접 객체를 생성하고 DI를 했지만 이제는 스프링 컨테이너를 통해서 사용한다.
 * 스프링 컨테이너는 @Configuration이 붙은 'AppConfig'를 설정 정보로 사용 여기서 @Bean이라 적힌 메서드를 모두 호출해서 반환된 객체를 스프링 컨테이너에 등록하고 이 객체를 스프링 빈이라고한다.
 * 스프링 빈은 @Bean이 붙은 메서드의 명을 스프링 빈의 이름으로 사용(name으로 이름 재지정은 가능)

## 싱글톤 패턴
 * 스프링 없는 순수한 DI 컨테이너로 만들면 요청할 때 마다 새로운 객체를 생성한다. 이는 메모리 낭비가 심하다 그래서 나온 해결책 객체가 1개만 생성되고 공유하도록 설계 하는 패턴이 싱글톤 패턴이다
 * 싱글톤 패턴의 단점
   * 구현할 때 코드가 많이 들어간다
   * 내부 속성을 변경하거나 초기화 하기 어렵다
   * 테스트 하기 어렵다

## 싱글톤 컨테이너 (스프링 컨테이너)
 * 싱글톤 패턴의 단점을 보완해서 객체 인스턴스를 싱글톤으로 관리
   * 싱글톤 패턴을 위한 지저분한 코드 들어가지 않아도 된다
   * DIP,OCP,테스트,private 생성자로 부터 자유롭게 싱글톤 사용가능

## 싱글톤 방식의 주의점
 * 싱글톤 패턴,스프링 같은 싱글톤 컨테이너를 사용하든 객체를 하나만 만들어 공유 하기 때문에 싱글톤 객체는 상태를 유지(staeful)하게 설계하면 안된다.
 * 무상태(stateless)로 설계해야 한다!
   * 특정 클라이언트에 의존적인 필드가 있으면 안된다.
   * 특정 클라이언트가 값을 변경할 수 있는 필드가 있으면 안된다.
   * 가급적 읽기만 가능해야 한다.
   * 필드 대신에 자바에서 공유되지 않는, 지역변수, 파라미터,ThreadLocal등을 사용해야 한다.

## Configuration
 * @Configuration이 붙은 AppConfig class의 경우 단순한 클래스가 아닌 싱글톤이 보장되도록 스프링에서 자동으로 변경된 클래스가 등록된다.

## @ComponentScan
 * @Component가 붙은 모든 클래스를 스프링 빈으로 등록한다.
 * 스프링 빈의 기본 이름은 클래스명을 사용하되 맨 앞글자만 소문자를 사용한다.
 * @Autowired를 지정하면 스프링 컨테이너가 자동으로 해당 스프링 빈을 찾아서 주입한다.
 * basePackages로 탐색위치(패키지) 지정 가능 지정하지 않으면 Default 해당 클래스 패키지가 시작 위치
 * @SpringBootApplication을 프로젝트 시작 루트에 두는 것이 관례적
 * @Component,@Controller,@Service,@Repository,@Configuration 모두 컴포넌트 스캔 대상이다.


